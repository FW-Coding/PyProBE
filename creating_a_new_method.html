<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creating a New Method &mdash; PyProBE  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyprobe" href="modules.html" />
    <link rel="prev" title="Installation" href="developer_installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PyProBE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developer_guide.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="developer_installation.html">Installation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating a New Method</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">pyprobe</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyProBE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="developer_guide.html">Developer Guide</a></li>
      <li class="breadcrumb-item active">Creating a New Method</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/creating_a_new_method.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="creating-a-new-method">
<span id="id1"></span><h1>Creating a New Method<a class="headerlink" href="#creating-a-new-method" title="Link to this heading">ÔÉÅ</a></h1>
<p>In PyProBE <a class="reference internal" href="pyprobe.methods.html#pyprobe.methods.basemethod.BaseMethod" title="pyprobe.methods.basemethod.BaseMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">Methods</span></code></a> are classes that
perform further analysis of the data. They can be peformed on any
<a class="reference internal" href="pyprobe.html#pyprobe.rawdata.RawData" title="pyprobe.rawdata.RawData"><code class="xref py py-class docutils literal notranslate"><span class="pre">RawData</span></code></a> or <a class="reference internal" href="pyprobe.html#pyprobe.result.Result" title="pyprobe.result.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<p>This document describes the standard format to be used for all PyProBE methods.
Constructing your method in this way ensures compatibility with the rest of the
PyProBE package, while keeping your code clean and easy to read.</p>
<p>Start by creating your class, and an __init__ method. This is where all of the
variable assignement is performed:
1. Define the input variables to the method using the</p>
<blockquote>
<div><p><a class="reference internal" href="pyprobe.methods.html#pyprobe.methods.basemethod.BaseMethod.variable" title="pyprobe.methods.basemethod.BaseMethod.variable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">variable()</span></code></a> method.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Perform the calculations using the input variables and any other functions defined
inside this method class.</p></li>
<li><p>Assign the results to the class attributes, which allows them to be read as
<a class="reference internal" href="pyprobe.html#pyprobe.result.Result" title="pyprobe.result.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> objects.</p></li>
</ol>
<p>Then you can add any additional functions to perform your calculations. Keep these
simple, defining all inputs as numpy arrays with minimal dimensionality. For instance,
in the example below, current and time are both 1D numpy arrays. The code could have
performed the same calculations using a single 2D array with a column for each variable,
however this would have made the code less readable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyprobe.methods.basemethod</span> <span class="kn">import</span> <span class="n">BaseMethod</span>

<span class="k">class</span> <span class="nc">CoulombCounter</span><span class="p">(</span><span class="n">BaseMethod</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;&quot;A method for calculating the charge passed.&quot;&quot;&quot;</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="n">Result</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialise the coulomb counter method.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The input data to the method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># define input variables to the method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">(</span><span class="s2">&quot;Current [A]&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">(</span><span class="s2">&quot;Time [s]&quot;</span><span class="p">)</span>

        <span class="c1"># perform the calculations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coulomb_count</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>

        <span class="c1"># assign the results, by calling the assign_outputs method on a dictionary</span>
        <span class="c1"># of the results of your method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_outputs</span><span class="p">({</span><span class="s2">&quot;Charge [C]&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">coulomb_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate the charge passed.</span>

<span class="sd">        Args:</span>
<span class="sd">            current: The current data.</span>
<span class="sd">            time: The time data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The charge passed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">trapz</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p>The result of the method above can be accessed as a result object by calling:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">CoulombCounter</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">result</span>
</pre></div>
</div>
<p>Which can be passed to any other Method or used in the <a class="reference internal" href="pyprobe.html#pyprobe.plot.Plot" title="pyprobe.plot.Plot"><code class="xref py py-class docutils literal notranslate"><span class="pre">Plot</span></code></a>
class.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="developer_installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules.html" class="btn btn-neutral float-right" title="pyprobe" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Thomas Holland, Electrochemical Science and Engineering Group, Imperial College London.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>